# Simple Makefile for Invoicing SaaS - Basic Commands
# Use this if Docker Compose V2 issues persist

.PHONY: help dev-simple build test clean install-deps

# Default target
help:
	@echo "ğŸš€ Invoicing SaaS - Simple Commands"
	@echo ""
	@echo "Basic Commands:"
	@echo "  make dev-simple   Start development without Docker"
	@echo "  make build        Build the Go application"
	@echo "  make test         Run tests"
	@echo "  make clean        Clean build artifacts"
	@echo "  make install-deps Check dependencies"

# Start development (local Go, requires PostgreSQL)
dev-simple:
	@echo "ğŸ¹ Starting development (local Go)..."
	@echo "âš ï¸  Make sure PostgreSQL is running on localhost:5432"
	@echo "ğŸ’¡ Run: createdb invoicing (if database doesn't exist)"
	@cd invoicing-backend && go run cmd/server/main.go

# Build the application
build:
	@echo "ğŸ”¨ Building Go application..."
	@cd invoicing-backend && go build -o bin/server cmd/server/main.go
	@echo "âœ… Build complete: invoicing-backend/bin/server"

# Run tests
test:
	@echo "ğŸ§ª Running tests..."
	@cd invoicing-backend && go test ./...

# Clean build artifacts
clean:
	@echo "ğŸ§¹ Cleaning build artifacts..."
	@rm -rf invoicing-backend/bin/
	@echo "âœ… Clean complete"

# Install dependencies
install-deps:
	@echo "ğŸ“¦ Checking dependencies..."
	@which go || (echo "âŒ Go is required but not installed" && exit 1)
	@which docker || (echo "âš ï¸  Docker not found - Docker commands won't work" || true)
	@docker compose version || (echo "âš ï¸  Docker Compose V2 not found - use Makefile.simple" || true)
	@echo "âœ… Dependencies check complete"
